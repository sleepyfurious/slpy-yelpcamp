<% include partials_header %>

<h1>This is the show.ejs</h1>
<p><%=campground.name%></p>
<img src="<%=campground.image%>">
<p><%=campground.description%></p>

<p> <em>Submitted By <%= campground.author.username %></em> </p>


<!-- CAMPGROUNDS' BUTTONS -->

    <% if(currentUser && campground.author.id.equals(currentUser._id)){ %>

        <a href="/campgrounds/<%= campground._id %>/edit" >Edit</a>

        <form action="/campgrounds/<%= campground._id %>?_method=DELETE" 
              method="POST"
              >
            <button>Delete</button>

        </form>

    <% }%>


<!-- COMMENTS -->

    <a href="/campgrounds/<%= campground._id %>/comments/new">
        Add New Comment
    </a>

    <% campground.comments.forEach(function(comment){ %>
        <p> <strong><%= comment.author.username %></strong> </p>
        <p> <%= comment.text %> </p>

        <% if (currentUser && comment.author.id.equals(currentUser._id)) { %>
            
            <a href="/campgrounds/<%=campground._id %>/comments/<%=comment._id %>/edit">
                Edit
            </a>

            <form action="/campgrounds/<%=campground._id %>/comments/<%=comment._id %>?_method=DELETE" 
                  method="POST"
                  >
                <input type="submit" value="Delete">
            </form>

        <% } %>
    <% }) %>

<% include partials_footer %>